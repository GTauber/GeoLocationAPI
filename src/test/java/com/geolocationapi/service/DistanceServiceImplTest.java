package com.geolocationapi.service;

import com.geolocationapi.dto.gsonmap.Address;
import com.geolocationapi.service.impl.DistanceServiceImpl;
import com.google.gson.GsonBuilder;
import org.junit.jupiter.api.Test;

import java.util.Arrays;
import java.util.List;

 class DistanceServiceImplTest {

        private DistanceServiceImpl distanceServiceImpl;

        public List<Address> createListOfAddresses() {
            var address01Str = """
                        {"results":[{"datasource":{"sourcename":"openstreetmap","attribution":"© OpenStreetMap contributors","license":"Open Database License","url":"https://www.openstreetmap.org/copyright"},"name":"Brasília","city":"Brasília","county":"Região Integrada de Desenvolvimento do Distrito Federal e Entorno","state":"Federal District","postcode":"70.701-010","country":"Brazil","country_code":"br","lon":-47.8823172,"lat":-15.7934036,"formatted":"Brasília - Federal District, 70.701-010, Brazil","address_line1":"Brasília","address_line2":"Brasília - Federal District, 70.701-010, Brazil","category":"populated_place","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"postcode","rank":{"importance":0.68050209029916,"popularity":7.979068072543841,"confidence":1,"confidence_city_level":0,"match_type":"full_match"},"place_id":"5162591fc5eff047c059ad0e25ff38962fc0f00103f901ff740f0200000000c0020792030942726173c3ad6c6961","bbox":{"lon1":-48.0423172,"lat1":-15.9534036,"lon2":-47.7223172,"lat2":-15.6334036}}],"query":{"text":"Brasilia DF, Brasil","parsed":{"city":"brasilia","state":"df","country":"brasil","expected_type":"city"}}}
                    """;
            var address02Str = """
                        {"results":[{"country_code":"br","housenumber":"122","street":"Praça Marechal Âncora","country":"Brazil","county":"Rio De Janeiro","datasource":{"sourcename":"mixed"},"state":"Southeast","city":"Rio de Janeiro","suburb":"Centro","lon":-43.1697526,"lat":-22.9045592,"formatted":"Praça Marechal Âncora 122, Centro, Rio de Janeiro - Southeast, Brazil","address_line1":"Praça Marechal Âncora 122","address_line2":"Centro, Rio de Janeiro - Southeast, Brazil","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"building","rank":{"popularity":7.971314049049733,"confidence":1,"confidence_city_level":0,"confidence_street_level":0,"match_type":"full_match"},"place_id":"519bb40474ba9545c059c24b153191e736c0c00203e2031f6d697865643a616464726573733a706f6c796c696e653a3234313133343532"}],"query":{"text":"Praça Mal. Âncora, 122 Centro, Rio de Janeiro RJ, 20021200","parsed":{"housenumber":"122","street":"praça mal. âncora","suburb":"centro","postcode":"20021200","city":"rio de janeiro","state":"rj","expected_type":"building"}}}
                    """;
            var address03Str = """
                        {"results":[{"datasource":{"sourcename":"openstreetmap","attribution":"© OpenStreetMap contributors","license":"Open Database License","url":"https://www.openstreetmap.org/copyright"},"name":"Boston Consulting Group","housenumber":"116","street":"Rua Lauro Müller","suburb":"Botafogo","district":"Zona Sul do Rio de Janeiro","city":"Rio de Janeiro","county":"Região Metropolitana do Rio de Janeiro","state":"Rio de Janeiro","postcode":"22290-160","country":"Brazil","country_code":"br","lon":-43.176043,"lat":-22.9573161,"state_code":"RJ","formatted":"Boston Consulting Group, Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","address_line1":"Boston Consulting Group","address_line2":"Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"amenity","rank":{"importance":0.7474899222535407,"popularity":8.038034323994104,"confidence":1,"confidence_city_level":1,"confidence_street_level":1,"match_type":"inner_part"},"place_id":"5149d8b793889645c0592c6ffdaa12f536c0f00103f901624d307001000000c00201920317426f73746f6e20436f6e73756c74696e672047726f7570","bbox":{"lon1":-43.176093,"lat1":-22.9573661,"lon2":-43.175993,"lat2":-22.9572661}},{"datasource":{"sourcename":"openstreetmap","attribution":"© OpenStreetMap contributors","license":"Open Database License","url":"https://www.openstreetmap.org/copyright"},"name":"RioSul","housenumber":"116","street":"Rua Lauro Müller","suburb":"Botafogo","district":"Zona Sul do Rio de Janeiro","city":"Rio de Janeiro","county":"Região Metropolitana do Rio de Janeiro","state":"Rio de Janeiro","postcode":"22299-900","country":"Brazil","country_code":"br","lon":-43.17673669175702,"lat":-22.95714795,"state_code":"RJ","formatted":"RioSul, Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22299-900, Brazil","address_line1":"RioSul","address_line2":"Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22299-900, Brazil","category":"commercial.shopping_mall","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"amenity","rank":{"importance":0.6765916679346919,"popularity":8.111694300641458,"confidence":1,"confidence_city_level":1,"confidence_street_level":1,"match_type":"inner_part"},"place_id":"51c18cd34e9f9645c059f6aee6a507f536c0f00102f9011d731e3b00000000c0020192030652696f53756c","bbox":{"lon1":-43.177293,"lat1":-22.9580715,"lon2":-43.1753471,"lat2":-22.9562184}},{"datasource":{"sourcename":"openstreetmap","attribution":"© OpenStreetMap contributors","license":"Open Database License","url":"https://www.openstreetmap.org/copyright"},"name":"Consulate General of Belgium","housenumber":"116","street":"Rua Lauro Müller","suburb":"Botafogo","district":"Zona Sul do Rio de Janeiro","city":"Rio de Janeiro","county":"Região Metropolitana do Rio de Janeiro","state":"Rio de Janeiro","postcode":"22290-160","country":"Brazil","country_code":"br","lon":-43.1762846,"lat":-22.9573504,"state_code":"RJ","formatted":"Consulate General of Belgium, Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","address_line1":"Consulate General of Belgium","address_line2":"Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"amenity","rank":{"importance":0.31100000000000005,"popularity":8.111694300641458,"confidence":1,"confidence_city_level":1,"confidence_street_level":1,"match_type":"inner_part"},"place_id":"51ece4677e909645c05901d072ea14f536c0f00103f90198156e0001000000c0020192031c436f6e73756c6174652047656e6572616c206f662042656c6769756d","bbox":{"lon1":-43.1763346,"lat1":-22.9574004,"lon2":-43.1762346,"lat2":-22.9573004}},{"datasource":{"sourcename":"openstreetmap","attribution":"© OpenStreetMap contributors","license":"Open Database License","url":"https://www.openstreetmap.org/copyright"},"name":"Consulate General of Norway","housenumber":"116","street":"Rua Lauro Müller","suburb":"Botafogo","district":"Zona Sul do Rio de Janeiro","city":"Rio de Janeiro","county":"Região Metropolitana do Rio de Janeiro","state":"Rio de Janeiro","postcode":"22290-160","country":"Brazil","country_code":"br","lon":-43.1760703,"lat":-22.9572683,"state_code":"RJ","formatted":"Consulate General of Norway, Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","address_line1":"Consulate General of Norway","address_line2":"Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"amenity","rank":{"importance":0.31100000000000005,"popularity":8.038034323994104,"confidence":1,"confidence_city_level":1,"confidence_street_level":1,"match_type":"inner_part"},"place_id":"510126ba78899645c0595dff09890ff536c0f00103f9015786860001000000c0020192031b436f6e73756c6174652047656e6572616c206f66204e6f72776179","bbox":{"lon1":-43.1761203,"lat1":-22.9573183,"lon2":-43.1760203,"lat2":-22.9572183}},{"datasource":{"sourcename":"openstreetmap","attribution":"© OpenStreetMap contributors","license":"Open Database License","url":"https://www.openstreetmap.org/copyright"},"name":"Consulate General of Spain","housenumber":"116","street":"Rua Lauro Müller","suburb":"Botafogo","district":"Zona Sul do Rio de Janeiro","city":"Rio de Janeiro","county":"Região Metropolitana do Rio de Janeiro","state":"Rio de Janeiro","postcode":"22290-160","country":"Brazil","country_code":"br","lon":-43.1762546,"lat":-22.9572458,"state_code":"RJ","formatted":"Consulate General of Spain, Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","address_line1":"Consulate General of Spain","address_line2":"Rua Lauro Müller 116, Botafogo, Rio de Janeiro - RJ, 22290-160, Brazil","timezone":{"name":"America/Sao_Paulo","offset_STD":"-03:00","offset_STD_seconds":-10800,"offset_DST":"-03:00","offset_DST_seconds":-10800},"result_type":"amenity","rank":{"importance":0.31100000000000005,"popularity":8.038034323994104,"confidence":1,"confidence_city_level":1,"confidence_street_level":1,"match_type":"inner_part"},"place_id":"518162bf828f9645c059bd3b8d0f0ef536c0f00103f901a5e49afe00000000c0020192031a436f6e73756c6174652047656e6572616c206f6620537061696e","bbox":{"lon1":-43.1763046,"lat1":-22.9572958,"lon2":-43.1762046,"lat2":-22.9571958}}],"query":{"text":"Rua Lauro Muller 116, Botafogo, Rio de Janeiro,RJ, 22290160","parsed":{"housenumber":"116","street":"rua lauro muller","suburb":"botafogo","postcode":"22290160","city":"rio de janeiro","state":"rj","expected_type":"building"}}}
                    """;
            var address01 = new GsonBuilder().create()
                    .fromJson(address01Str, Address.class);
            var address02 = new GsonBuilder().create()
                    .fromJson(address02Str, Address.class);
            var address03 = new GsonBuilder().create()
                    .fromJson(address03Str, Address.class);
            return Arrays.asList(address01, address02, address03);
        }

        @Test
         void testDistanceProcessor() {

            distanceServiceImpl.distanceProcessor(createListOfAddresses());

        }
}
